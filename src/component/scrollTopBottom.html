<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>mobile触摸页面</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<style>
			.mobile-slide {
				margin-bottom: 10px;
				transform: rotate;
			}
			
		</style>

		<link rel="stylesheet" type="text/css" href="../css/mobile.css" />

	</head>

	<body>
		<!-- data-scrolltop 是否下拉#   data-scrollbottom 是否上拉   data-scroll-bar 是否显示滚动条-->
		<div class="mobile-scroll-topbottom a" data-scrolltop data-scrollbottom data-scroll-bar>

			<!--header-->
			<!--<header class="mobile-head">
				<div class="mobile-back">
					<span class="iconfont icon-zuojiantou"></span>
				</div>
				<h2>上下滑动</h2>
			</header>-->

			<!--content-->
			<section class="mobile-scroll-topbottom-content">
				<p>==========================</p>
				<a href="http://www.baidu.com">88888888888888888888888888888888888888</a>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>
				<p>p</p>

				<p>#########################################</p>

			</section>

			<!--footer-->
			<footer>

			</footer>

		</div>
		<script src="../js/mobile.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			
			// 拉到底部 加载数据
			var firstbottom = true;
			var bottomcontent=m(".mobile-scroll-topbottom-content");
			m(".mobile-scroll-topbottom").on("scrollbottom", function(event) {
//				console.log(event.detail);
//				console.log("bottom");
//				
				if(firstbottom) {
					firstbottom = false;
					bottomcontent.find(".loading").remove();
					var loading=document.createElement("div");
					loading.innerHTML="正在加载中...";
					loading.classList.add("loading");
					bottomcontent.append(loading);
					setTimeout(function() {
						
						m.get("../json/topbottom.json", function(data) {
							var doc = document.createDocumentFragment();
							for(var i = 0; i < data.length; i++) {
								var p = document.createElement("p");
								p.innerHTML = data[i].text;
								doc.appendChild(p)
							}
					
							bottomcontent.find(".loading").remove();
							bottomcontent.append(doc);
							bottomcontent.append("=======================");
							firstbottom = true;
							event.detail.barFun(); // 重设滚动条

						},function(){
							firstbottom = true;
							loading.innerHTML="数据加载失败...";
						});
					}, 1000);
				}

			});
			
			// 拉到顶部
			m(".mobile-scroll-topbottom").on("scrolltop", function(event) {

				//console.log(event.detail);
				//console.log("scrolltop");
			})
			
			// 滚动
			m(".mobile-scroll-topbottom").on("scrolltopbottom", function(event) {

				//console.log(event.detail);
				//console.log("scrolltopbottom");
			})
		</script>

	</body>

</html>